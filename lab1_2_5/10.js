var zones = [[[[7.513275146484376, 44.96917023288551], [7.5196288997456655, 44.96917023288551], [7.5196288997456655, 44.973665429771835], [7.513275146484376, 44.973665429771835], [7.513275146484376, 44.96917023288551]]],[[[7.5196288997456655, 44.96917023288551], [7.525982653006955, 44.96917023288551], [7.525982653006955, 44.973665429771835], [7.5196288997456655, 44.973665429771835], [7.5196288997456655, 44.96917023288551]]],[[[7.525982653006955, 44.96917023288551], [7.532336406268245, 44.96917023288551], [7.532336406268245, 44.973665429771835], [7.525982653006955, 44.973665429771835], [7.525982653006955, 44.96917023288551]]],[[[7.532336406268245, 44.96917023288551], [7.538690159529534, 44.96917023288551], [7.538690159529534, 44.973665429771835], [7.532336406268245, 44.973665429771835], [7.532336406268245, 44.96917023288551]]],[[[7.538690159529534, 44.96917023288551], [7.545043912790824, 44.96917023288551], [7.545043912790824, 44.973665429771835], [7.538690159529534, 44.973665429771835], [7.538690159529534, 44.96917023288551]]],[[[7.545043912790824, 44.96917023288551], [7.551397666052114, 44.96917023288551], [7.551397666052114, 44.973665429771835], [7.545043912790824, 44.973665429771835], [7.545043912790824, 44.96917023288551]]],[[[7.551397666052114, 44.96917023288551], [7.557751419313403, 44.96917023288551], [7.557751419313403, 44.973665429771835], [7.551397666052114, 44.973665429771835], [7.551397666052114, 44.96917023288551]]],[[[7.557751419313403, 44.96917023288551], [7.564105172574693, 44.96917023288551], [7.564105172574693, 44.973665429771835], [7.557751419313403, 44.973665429771835], [7.557751419313403, 44.96917023288551]]],[[[7.564105172574693, 44.96917023288551], [7.5704589258359825, 44.96917023288551], [7.5704589258359825, 44.973665429771835], [7.564105172574693, 44.973665429771835], [7.564105172574693, 44.96917023288551]]],[[[7.5704589258359825, 44.96917023288551], [7.576812679097272, 44.96917023288551], [7.576812679097272, 44.973665429771835], [7.5704589258359825, 44.973665429771835], [7.5704589258359825, 44.96917023288551]]]]

var startDate = new ISODate("2017-09-01T00:00:00")
var startUnixTime = startDate.getTime() /1000
var endDate = new ISODate("2017-09-30T23:59:59")
var endUnixTime = endDate.getTime() / 1000
var time=-2
var addtime = -2*60*60

for (i = 0; i<zones.length;i++)
 {
var result =  db.PermanentBookings.aggregate([
   { $project: {
         _id:1,
         loc: 1,
         init_time:1,
        final_time:1
         }         
 
 },    
              
{$match:{
    loc:{$geoWithin:
        {$geometry:{
            "type": "Polygon",
            "coordinates": zones[i]
        }
    }
  },
  init_time:{$gte:startUnixTime+addtime,$lte:endUnixTime+addtime},
  final_time:{$gte:startUnixTime+addtime,$lte:endUnixTime+addtime}
 
}},
   
{
    $count:"tot"
}])

if(result.hasNext())

{

    a = result.next()

    print (i,a["tot"])

}

else {
	print (i,0)
 }
 }

         
     